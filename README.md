# 📅 值班排程系統 - 使用指南

[![Angular](https://img.shields.io/badge/Angular-16-DD0031.svg?logo=angular)](https://angular.io/)
[![Firebase](https://img.shields.io/badge/Firebase-Firestore-FFCA28.svg?logo=firebase)](https://firebase.google.com/products/firestore)
[![線上版本](https://img.shields.io/badge/🌐_線上版本-點我使用-brightgreen)](https://tfd10507.github.io/roster/)

> **一鍵排班，即時同步** - 取代傳統 Excel 值班表，智能管理團隊值班排程

---

## 🚀 快速開始

### 線上使用（推薦）
直接點擊：[**📅 線上值班系統**](https://tfd10507.github.io/roster/)

### 本地開發
```bash
npm install    # 安裝依賴
ng serve       # 啟動開發服務器
```

---

## 📋 主要功能使用說明

### 1. 🎯 雙模式值班管理

#### **一般值班**（預設模式）
- **人員**：12 人輪值（Lynn → Eason → Yong → Roy → 77... 等）
- **週期**：每 7 天輪替一次
- **適用**：日常值班管理

#### **UAT 測資小天使**
- **人員**：14 人輪值  
- **週期**：每 14 天輪替一次（配合 Sprint）
- **適用**：測試期間的測資維護值班

**💡 使用方式**：
- 點擊右上角的 `一般值班` 或 `UAT測資小天使` 切換模式
- 每個模式獨立管理，不會互相影響

### 2. 🛠️ 值班異動操作

#### **如何更改值班人員**
1. **點擊日曆上的任一天**
2. 在彈出對話框中：
   - **選擇新的值班人員**（單選按鈕）
   - **選擇異動範圍**：
     - 🎯 `此日期` - 只改這一天  
     - 📅 `整個週期` - 改整個值班週期
   - **填寫異動人員**（誰執行這個異動）
3. **點擊確認**，系統會：
   - ✅ 即時同步到所有人的畫面
   - 📝 自動記錄異動歷程
   - 🔔 顯示操作成功提示

#### **💡 操作小技巧**
- 異動後的日期會顯示 ⚡ 圖示
- 可以多次修改同一天，系統會覆蓋之前的異動
- 整個週期異動會一次改變 7 天（一般值班）或 14 天（UAT）

### 3. ⏸️ 週期插入功能

#### **什麼時候使用？**
- 🎊 **連續假期**：過年、國定假日暫停值班
- 🔧 **系統維護**：維護期間調整排程
- 📦 **特殊專案**：需要暫停正常排班的情況

#### **如何插入週期？**
1. **點擊 `插入週期` 按鈕**
2. 設定：
   - **開始日期**：從什麼時候開始暫停
   - **持續天數**：暫停幾天（提供快選：1週、2週、1月等）
   - **插入原因**：說明為什麼要暫停
3. **確認後**：
   - 🔄 後續的值班會自動往後延續
   - 📝 插入的日期顯示為「週期插入」
   - ⚡ 所有人的畫面立即更新

### 4. 📊 异動歷程查看

#### **如何查看異動記錄？**
1. **點擊 `異動歷程` 按鈕**
2. 可以：
   - 🔍 **篩選**：按值班類型、人員、日期範圍篩選
   - 📊 **排序**：按時間、日期、人員排序
   - 📄 **分頁瀏覽**：每頁 20 筆記錄
   - 💾 **匯出 CSV**：下載完整記錄到 Excel

#### **記錄包含什麼？**
- 📅 異動日期和值班類型
- 👤 原始人員 → 異動後人員  
- 🕒 異動時間和操作人員
- 🔄 該筆記錄的變更次數

### 5. ⚠️ 衝突檢測

#### **自動檢測什麼？**
系統會自動檢查同一個人在兩種值班模式下是否有重疊：

- 🔴 **嚴重衝突**（7 天內）：需立即處理
- 🟡 **中度提醒**（8-30 天內）：建議調整  
- 🟢 **安全狀態**：30 天內無衝突

#### **如何處理衝突？**
1. 查看衝突提示（會自動顯示在畫面上）
2. 點擊有衝突的日期
3. 將其中一個值班模式的人員改為其他人
4. 衝突會自動解除

---

## ⚡ 常見問題 FAQ

### Q1: 為什麼我的異動沒有同步？
**A:** 檢查網路連線，系統會在 1 秒內自動同步。如果仍有問題，重新整理頁面。

### Q2: 可以取消已经做的異動嗎？
**A:** 目前不支援直接取消，但可以：
1. 再點一次該日期
2. 改回原來的人員
3. 系統會產生新的異動記錄

### Q3: 整個週期異動和單日異動有什麼差別？
**A:** 
- **單日異動**：只改變選擇的那一天
- **週期異動**：改變該人員負責的整個週期（7 或 14 天）

### Q4: 插入週期後可以刪除嗎？
**A:** 目前不支援刪除插入週期，但可以聯繫系統管理員協助處理。

### Q5: CSV 匯出的檔案亂碼怎麼辦？
**A:** 使用 Excel 開啟時選擇 UTF-8 編碼，或用 Google Sheets 開啟後再匯出。

---

## 🔧 系統管理

### 環境設定
- **開發環境**：Angular CLI + Node.js 16+
- **資料庫**：Firebase Firestore（雲端 NoSQL）
- **部署**：GitHub Pages 自動部署

### 更新部署
```bash
ng build --prod           # 建置生產版本
npm run deploy            # 部署至 GitHub Pages
```

### Firebase 設定
詳見：[Firebase_Setup_Guide.md](Firebase_Setup_Guide.md)

---

## 📞 聯絡與回饋

- **🐛 問題回報**：發現 Bug 請建立 GitHub Issue
- **💡 功能建議**：歡迎提出新功能想法
- **❓ 使用問題**：可以直接詢問系統開發者

---

## 🎯 版本資訊

**目前版本**：v2.0  
**更新日期**：2026年3月

### 最新更新
- ✅ 修復 Firebase 權限問題
- ✅ 優化值班算法（從 Lynn 開始輪值）
- ✅ 移除舊版遷移功能
- ✅ 改善 UI/UX 互動體驗

---

<div align="center">

**🎉 讓排班變得簡單，讓團隊協作更順暢！**

</div>
